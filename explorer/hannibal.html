<!DOCTYPE html>
<html lang="en" dir="ltr" >
  <head>
    <title>HSE</title>
    <meta http-equiv="Content-Type" content="application/xml+xhtml; charset=UTF-8" />
    <meta name="description" content="HANNIBAL - Store Explorer" />
    <meta name="viewport" content="width=device-width, maximum-scale=1.0" />
    
    <script type="text/javascript">

      if (typeof console === "undefined") {
        console = { log:function(){}, warn:function(){}, error:function(){} };
      }

      window.performance = window.performance || {};
      // window.performance.timing = window.performance.timing || {};

      window.performance.now = 
        window.performance.now ||
        window.performance.webkitNow || 
        (function(){var t = Date.now(); return function(){return Date.now() - t;};})();

      window.performance.timing.navigationStart = 
        window.performance.timing.navigationStart || 
        Date.now();

      window.local = !window.location.host;

      var TIM = (function(){
        
        var t0   = window.performance.timing.navigationStart, // || Date.now()||+new Date(), 
            fill = new Array(18).join(" "), 
            pad  = function(s){return (s+fill).substr(0, fill.length);},
            now  = function( ){return parseInt(window.performance.now()*10, 10)/10000;}

        return {
          // Now:  now,
          step: function(key, com){
            console.log (pad(key), "-", now() + " sec", (com) ? com : "-");
          }
        };
        
      })();

      TIM.step(window.location.host || "Local", 
        (navigator.online ? "online" : "offline") + 
        " - " + document.location.href
      );

    </script>

    <link rel="shortcut icon"  href="favicon.ico" />
    <link rel="stylesheet" href="hannibal.css" type="text/css" />

  </head>

  <body>

    <!-- Menu -->
    <div id="contMenu">
      <div class="menu">
        <ul>
          <!-- <li id="menASM">ASM</li> -->
          <!-- <li id="menHTN">HTN-TEST</li> -->
          <li id="menCIV">CIV
            <span>
              <select id="slcCivs"></select>
            </span>
          </li>
          <li id="menHQC">HCQ</li>
          <li id="menHTN0AD">HTN</li>
          <li id="menTECH">TECH</li>
          <li id="menMMAP"><a target="_blank" href="../docs/Hannibal-Mmap.html">MMAP</a></li>

          <li id="menRFH" style="float: right;" onclick="location.reload();">reload</li>
          <li id="menTop" style="float: right;" 
              onclick="document.documentElement.scrollTop = 0;"
              onmouseover="document.documentElement.scrollTop = 0;"
          >top</li>

          <li id="menVerbose" style="float: right;">verbosity 
            <select id="slcVerbose">
              <option>0</option>
              <option>1</option>
              <option>2</option>
              <option>3</option>
            </select>
          </li>

        </ul>
      </div>
    </div>

    <!-- Content -->
    <div class="content" >
    
      <div class="interface">

        <!-- ASM -->
        <div class="contASM panel">
          <div>
            asm.js links: <a href="https://blog.mozilla.org/luke/2014/01/14/asm-js-aot-compilation-and-startup-performance/">cache</a>
          </div>   
          <br />
          <label for="slcRepeats">Repeat</label>
          <select id="slcRepeats">
            <option>1</option>
            <option>2</option>
            <option selected>4</option>
            <option>8</option>
          </select>
          <label for="slcLoops">Loops</label>
          <select id="slcLoops">
            <option>1.000</option>
            <option selected>10.000</option>
            <option>100.000</option>
            <option>1.000.000</option>
          </select>
          <button id="btnASMGo1" onclick="H.ASMTEST()">emp()</button>        
          <button id="btnASMGo2" onclick="H.ASMTEST1()">sin()</button>        
          <button onclick="H.Display.clear()">Clear</button>     
        </div>

        <!-- HTN TEST -->
        <div class="contHTN panel">
          <button id="btnExample1" onclick="H.HTN.Blocks.example1('slcVerbose');">Test1</button>
          <button id="btnExample2" onclick="H.HTN.Blocks.example2('slcVerbose');">Test2</button>
          <button id="btnExample2" onclick="H.HTN.Blocks.example3('slcVerbose');">Stress</button>
        </div>

        <!-- HCQ -->
        <div class="contHCQ panel">
          <div>
            <label for="slcVerbs">Verbs</label>
            <select id="slcVerbs"></select>
            <label for="slcNodes">Node</label>
            <select id="slcNodes"></select>
            <button id="btnAnalyze">Analyze</button>
            <button id="btnPlan">Plan</button>
            <br />
          </div>
          
          <div>
            <label for="slcExams">Examples</label>
            <select id="slcExams"></select>
            <br />
          </div>
          
          <div>
            <label for="txtHQC" style="vertical-align: top">Query</label>
            <textarea id="txtHQC" maxlength="1000" cols="100" rows="4"></textarea>        
            <br />
            <button style="float: right; margin-right: 17px;" id="btnClear">Clear</button>
          </div>

          <label for="slcModes">Display</label>
          <select id="slcModes">
            <option>info</option>
            <option>json</option>
          </select>

          <button id="btnGoHCQ">Go</button>
        </div>


        <!-- MMAP-->
        <div class="contMMAP panel">
        </div>

        <!-- TECH-->
        <div class="contTECH panel">
          <div id="jsonTECH">
          </div>
        </div>


        <!-- HTN 0 A.D. -->
        <div class="contHTN0AD panel">

          <div>
            <label for="txtState" style="vertical-align: top">State</label>
            <textarea id="txtState" class="f11" maxlength="1000" cols="44" rows="6">
"ress": {},
"ents": {"structures.athen.civil.centre": 1},
"tech": ["phase.village"]
           </textarea>        

            <label for="txtGoal" style="vertical-align: top">Goal</label>
            <textarea id="txtGoal" class="f11" maxlength="1000" cols="44" rows="6">
"ress": {},
"ents": {"units.athen.champion.marine": 1},
"tech": []
            </textarea>        

          </div>

          <div>

            <div style="float:left; margin-left: 62px;">
              <button id="btnHTN0ADT1" style="float:left">Test 1</button>
              <button id="btnHTN0ADT2" style="float:left">Test 2</button>
              <button id="btnHTN0ADT3" style="float:left">Test 3</button>
            </div>

            <div style="float:right; margin-right: 16px;">
              <label for="slcStress">Loops</label>
              <select id="slcStress">
                <option>10</option>
                <option selected>100</option>
                <option>1.000</option>
                <option>10.000</option>
              </select>
              <button id="btnHTN0ADSTRESS" style="margin-right: 94px;" >Stress</button>
              <button id="btnHTN0ADGO" style="margin: 0px 0px 0 14px">GO</button>
            </div>

          </div>       

        </div>
      
      </div>
      <div class="trenner"></div>
    

    </div>

    <div class="trenner"></div>


    <!-- Footer -->

    <div id="debug">
    </div>
    <div class="trenner"></div>

    <div class="results">
      <button style="float: right;" onclick="H.Display.clear()">Clear</button>            
      <table id="tblResult"></table>
    </div>
    <div class="trenner"></div>

    <div class="timing">
      <div id="ifoResult"></div>
    </div>
    <div class="trenner"></div>

    <div>
      <script>

        var bInitializes = true;

        window.onerror = function(e, f, l){
          var error = "";
          if (bInitializes){
            error += "Browser not supported. Try this one ";
            error += "<a href='http://www.mozilla.org/en-US/firefox/channel/#aurora'>Firefox</a>, ";
            error += "<a href='https://developer.mozilla.org/en-US/Firefox/Releases/30'>why</a> ";
            error += "and come back soon, thx.<br />";
            error += "<span style='font-weight: 400;'>[" + e + "]<span>";
            document.getElementById("debug").innerHTML = error;
          } else {
            error += "Error occured.<br />";
            error += "<span style='font-weight: 400;'>[" + e + "]<span><br />";
            error += "<span style='font-weight: 400;'>[" + f + ":" + l + "]<span><br />";
            document.getElementById("debug").innerHTML += error;
          }
          console.log(error);
          error += 1;
        }

        var $  = document.getElementById.bind(document),
            $$ = document.querySelector.bind(document),
            // fake bot environment 
            HANNIBAL = {},
            H = HANNIBAL,
            deb = function(){
              var args = arguments;
              if (args.length === 0) {args = ["**"];}
              if (args.length === 1) {args = ["%s", args[0]];}
              console.log(H.format.apply(H, args));
            };

        H.Bot = {ticks: false};

      </script>

      <!-- simulates alphabetic loading sequence -->
      <script type="text/javascript" src="../_helper.js"></script>
      <script type="text/javascript" src="../asm.js"></script>
      <script type="text/javascript" src="../config.js"></script>
      <script type="text/javascript" src="../data.js"></script>
      <script type="text/javascript" src="../economy.js"></script>
      <script type="text/javascript" src="../store.js"></script>
      <script type="text/javascript" src="../htn-helper.js"></script>
      <script type="text/javascript" src="../htn-methods.js"></script>
      <script type="text/javascript" src="../htn-operators.js"></script>
      <script type="text/javascript" src="../htn-planner.js"></script>
      <script type="text/javascript" src="../tools.js"></script>
      <script type="text/javascript" src="data/store-json.export"></script>
      <script type="text/javascript" src="data/techs-json.export"></script>
      <script type="text/javascript" src="htn-hannibal-examples.js"></script>
      <script type="text/javascript" src="htn-blocks-methods.js"></script>
      <script type="text/javascript" src="htn-blocks-methods2.js"></script>
      <script type="text/javascript" src="htn-blocks-operators.js"></script>
      <script type="text/javascript" src="htn-blocks-examples.js"></script>
      <script type="text/javascript" src="display.js"></script>
      
      <script>

        bInitializes = false;

          H.HCQ = H.Store.Query;
          H.QRY = function(hcq, debug){return new H.HCQ(H.store, hcq, debug);};

        window.onload = function(){
          var error = "";
          // throw "error"; 
          // shortcuts
          H.Display.prepare();
          H.Display.hide();
          H.Display.import("athen");
          H.Display.init();
          $("menHTN0AD").onclick(true); //menHTN0AD, menAsm, menTECH, menHQC
          TIM.step("Ready1");
        };
        
      </script>
    </div>
 
  </body>
</html>
