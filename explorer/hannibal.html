<!DOCTYPE html>
<html lang="en" dir="ltr" >
  <head>
    <title>HSE</title>
    <meta http-equiv="Content-Type" content="application/xml+xhtml; charset=UTF-8" />
    <meta name="description" content="HANNIBAL - Store Explorer" />
    <meta name="viewport" content="width=device-width, maximum-scale=1.0" />
    
    <script type="text/javascript">

      if (typeof console === "undefined") {
        console = { log:function(){}, warn:function(){}, error:function(){} };
      }

      window.performance = window.performance || {};
      // window.performance.timing = window.performance.timing || {};

      window.performance.now = 
        window.performance.now ||
        window.performance.webkitNow || 
        (function(){var t = Date.now(); return function(){return Date.now() - t;};})();

      window.performance.timing.navigationStart = 
        window.performance.timing.navigationStart || 
        Date.now();

      window.local = !window.location.host;

      var TIM = (function(){
        
        var t0   = window.performance.timing.navigationStart, // || Date.now()||+new Date(), 
            fill = new Array(18).join(" "), 
            pad  = function(s){return (s+fill).substr(0, fill.length);},
            now  = function( ){return parseInt(window.performance.now()*10, 10)/10000;}

        return {
          // Now:  now,
          step: function(key, com){
            console.log (pad(key), "-", now() + " sec", (com) ? com : "-");
          }
        };
        
      })();

      TIM.step(window.location.host || "Local", 
        (navigator.online ? "online" : "offline") + 
        " - " + document.location.href
      );

    </script>

    <link rel="shortcut icon"  href="favicon.ico" />
    <link rel="stylesheet" href="hannibal.css" type="text/css" />

  </head>

  <body>

  <!-- Menu -->
    <div id="menu" class="bar">
      <div class="menu">
        <ul>
          <!-- <li id="menASM" onclick="H.Browser.menu('ASM');">ASM</li> -->
          <!-- <li id="menHTN" onclick="H.Browser.menu('HTNTEST');">HTN-TEST</li> -->
          <li id="menCIV"       onclick="location.hash = ''">CIV</li>
          <select id="slcCivs"  onchange="H.Browser.civ()"></select>
          <li id="menHQC"       onclick="H.Browser.do('*;*;HCQ');" >HCQ</li>
          <li id="menHTN"       onclick="H.Browser.do('*;*;HTN');" >HTN</li>
          <li id="menBLOCKS"    onclick="H.Browser.do('*;*;BLOCKS');" >BLOCKS</li>
          <li id="menTECH"      onclick="H.Browser.do('*;*;TECH');">TECH</li>
          <li id="menMMAP"      onclick="H.Browser.menu('MMAP');">MMAP</li>
          <li id="menMAPS"      onclick="H.Browser.do('*;*;MAPS');">MAPS</li>
          <li id="menLOAD"      onclick="H.Browser.menu('LOAD');" style="float: right;" >rel</li>
          <li id="menTop"       onclick="H.Browser.menu('TOP');"  onmouseover="H.Browser.menu('TOP');" style="float: right;" 
          >top</li>

          <li id="menVerbose" style="float: right;">vbty 
            <select id="slcVerbose" onchange="H.Browser.verbose()">
              <option>0</option>
              <option>1</option>
              <option>2</option>
              <option>3</option>
              <option>4</option>
            </select>
          </li>

        </ul>
      </div>
    </div>

    <!-- Trenner -->
    <div class="trenner topmgn"></div>

  <!-- Interface -->
    <div class="interface bar" >
    
      <div class="container">

      <!-- HCQ -->
        <div class="HCQ panel">
          <div class="left">
            <label for="slcVerbs">Verbs</label>
            <select id="slcVerbs"></select>
            <label for="slcNodes">Node</label>
            <select id="slcNodes"></select>
            <br />
          </div>
          <div class="trenner4"></div>
          
          <div class="left">
            <label for="slcExams">Examples</label>
            <select id="slcExams"></select>
            <br />
          </div>
          <div class="trenner4"></div>
          
          <div class="left">
            <label for="txtHCQ" style="vertical-align: top">Query</label>
            <textarea id="txtHCQ" maxlength="1000" rows="4"></textarea>        
          </div>

          <div class="trenner2"></div>

          <div class="left">
            <label for="slcModes">Display</label>
            <select id="slcModes">
              <option>info</option>
              <option>json</option>
            </select>
            <button id="btnQuery"   onclick="H.Browser.do('*;*;HCQ;query;txtHCQ');">Query</button>
            <button id="btnAnalyze" onclick="H.Browser.do('*;*;HCQ;analyze;txtHCQ');">Analyze</button>
            <button id="btnPlan"    onclick="H.Browser.do('*;*;HCQ;plan;txtHCQ');">Plan</button>
            <button style="margin-left: 8px;" id="btnClear">Clear</button>
          </div>
          <div class="trenner"></div>

        </div>

      <!-- HTN -->
        <div class="HTN panel">
          <div class="left">
            <label for="btnHTN0ADT1" style="vertical-align: top">Tests</label>
            <button id="btnHTNT1">Test 1</button>
            <button id="btnHTNT2">Test 2</button>
            <button id="btnHTNT3">Test 3</button>
            <button id="btnHTNTC" style="margin-left: 8px">Test Civ</button>
          </div>
          <div class="trenner4"></div>
          <div class="left">

            <label for="txtState" style="vertical-align: top">State</label>
            <textarea id="txtState" class="f11" maxlength="1000" rows="5">
              "ress": {},
              "ents": {"structures.athen.civil.centre": 1},
              "tech": ["phase.village"]
           </textarea>        

            <label for="txtGoal" style="vertical-align: top">Goal</label>
            <textarea id="txtGoal" class="f11" maxlength="1000"  rows="5">
              "ress": {},
              "ents": {"units.athen.champion.marine": 1},
              "tech": []
            </textarea>        
            <br />

          </div>
          <div class="trenner2"></div>
          <div>

            <div class="right" style="margin-right: 9px;">
              <button id="btnHTNGo" style="margin-left: 161px">GO</button>
              <button id="btnHTNStress">Stress</button>
              <select id="slcStress">
                <option>10</option>
                <option>50</option>
                <option selected>100</option>
                <option>500</option>
                <option>1.000</option>
                <option>10.000</option>
              </select>
              <label for="slcStress">Loops</label>
            </div>
            <br />

          </div>       
        </div>

      <!-- BLOCKS -->
        <div class="BLOCKS left panel">
          <label for="btnExample1" style="vertical-align: top">Blocks World</label>
          <button id="btnBlocksExample1">Test1</button>
          <button id="btnBlocksExample2">Test2</button>
          <button id="btnBlocksExample3">Stress</button>
        </div>
        <div class="trenner"></div>

      <!-- MMAP-->
        <div class="MMAP panel">
        </div>

      <!-- MAPS -->
        <div class="MAPS left panel">
          <label for="slcMaps" style="vertical-align: top">Load</label>
          <select id="slcMaps">
            <option>localhost:8080/public/maps/scenarios/Belgian_Bog_night.xml</option>
            <option>localhost:8080/public/maps/scenarios/aitest03.xml</option>
            <option>localhost:8080/public/maps/scenarios/Arcadia%2002.xml</option>

            <option>localhost:8080/public/maps/scenarios/_default.xml</option>
            <option>localhost:8080/public/maps/scenarios/aitest02.xml</option>
            <option>localhost:8080/public/maps/scenarios/aitest03.xml</option>
            <option>localhost:8080/public/maps/scenarios/aitest04.xml</option>
            <option>localhost:8080/public/maps/scenarios/Arcadia%2002.xml</option>
            <option>localhost:8080/public/maps/scenarios/Azure%20Coast%282%29.xml</option>
            <option>localhost:8080/public/maps/scenarios/Azure%20Coast%284%29.xml</option>
            <option>localhost:8080/public/maps/scenarios/Azure%20Coast.xml</option>
            <option>localhost:8080/public/maps/scenarios/Barcania.xml</option>
            <option>localhost:8080/public/maps/scenarios/Battle%20for%20the%20Tiber.xmlber.xml</option>
            <option>localhost:8080/public/maps/scenarios/Belgian_Bog_night.xml</option>
            <option>localhost:8080/public/maps/scenarios/Bridge_demo.xml</option>
            <option>localhost:8080/public/maps/scenarios/Campaign%20Test%20Map%202%20-%20heightmap.xmlCampaign Tesoption>Map 2 - heightmap.xml</a>
            <option>localhost:8080/public/maps/scenarios/Campaign%20Test%20Map.xml</option>
            <option>localhost:8080/public/maps/scenarios/Combat_demo.xml</option>
            <option>localhost:8080/public/maps/scenarios/Combat_demo_%28huge%29.xml</option>
            <option>localhost:8080/public/maps/scenarios/Death%20Canyon%20-%20Invasion%20Force.xmln option>Invasion Force.xml</a>
            <option>localhost:8080/public/maps/scenarios/Demo_Trading.xml</option>
            <option>localhost:8080/public/maps/scenarios/Eire%20and%20Albion.xml</option>
            <option>localhost:8080/public/maps/scenarios/Fast%20Oasis.xml</option>
            <option>localhost:8080/public/maps/scenarios/Fishing_demo.xml</option>
            <option>localhost:8080/public/maps/scenarios/Flight_demo.xml</option>
            <option>localhost:8080/public/maps/scenarios/Flight_demo_2.xml</option>
            <option>localhost:8080/public/maps/scenarios/Gold_Rush.xml</option>
            <option>localhost:8080/public/maps/scenarios/Gorge.xml</option>
            <option>localhost:8080/public/maps/scenarios/Height%20Map%20Import%20-%20Demo%20%28Fractal">Heighoption>Map Import - Demo (Fractal).xml</a>
            <option>localhost:8080/public/maps/scenarios/Height%20Map%20Import%20-%20Demo%20%28Greece">Heighoption>Map Import - Demo (Greece).xml</a>
            <option>localhost:8080/public/maps/scenarios/Height%20Map%20Import%20-%20Demo%20%28Greece-Small%29.xmloption>Height Map Import - Demo (Greece-Small).xml</a>
            <option>localhost:8080/public/maps/scenarios/Introductory%20Tutorial.xml</option>
            <option>localhost:8080/public/maps/scenarios/Laconia%2001.xml</option>
            <option>localhost:8080/public/maps/scenarios/Migration.xml</option>
            <option>localhost:8080/public/maps/scenarios/Miletus.xml</option>
            <option>localhost:8080/public/maps/scenarios/Multiplayer_demo.xml</option>
            <option>localhost:8080/public/maps/scenarios/Necropolis.xml</option>
            <option>localhost:8080/public/maps/scenarios/Pathfinding_demo.xml</option>
            <option>localhost:8080/public/maps/scenarios/Pathfinding_terrain_demo.xmlemo.xml</option>
            <option>localhost:8080/public/maps/scenarios/Peloponnese.xml</option>
            <option>localhost:8080/public/maps/scenarios/Polynesia.xml</option>
            <option>localhost:8080/public/maps/scenarios/reservoir.xml</option>
            <option>localhost:8080/public/maps/scenarios/Resource_demo.xml</option>
            <option>localhost:8080/public/maps/scenarios/road%20demo.xml</option>
            <option>localhost:8080/public/maps/scenarios/Saharan%20Oases.xml</option>
            <option>localhost:8080/public/maps/scenarios/Sahel.xml</option>
            <option>localhost:8080/public/maps/scenarios/Sandbox%20-%20Athenians.xml</option>
            <option>localhost:8080/public/maps/scenarios/Sandbox%20-%20Britons.xml</option>
            <option>localhost:8080/public/maps/scenarios/Sandbox%20-%20Carthaginians.xmlians.xml<option>>
            <option>localhost:8080/public/maps/scenarios/Sandbox%20-%20Gauls.xml</option>
            <option>localhost:8080/public/maps/scenarios/Sandbox%20-%20Iberians.xml</option>
            <option>localhost:8080/public/maps/scenarios/Sandbox%20-%20Macedonians.xmlans.xml</option>
            <option>localhost:8080/public/maps/scenarios/Sandbox%20-%20Mauryans.xml</option>
            <option>localhost:8080/public/maps/scenarios/Sandbox%20-%20Persians.xml</option>
            <option>localhost:8080/public/maps/scenarios/Sandbox%20-%20Ptolemies%202.xmls 2.xml</option>
            <option>localhost:8080/public/maps/scenarios/Sandbox%20-%20Ptolemies.xml</option>
            <option>localhost:8080/public/maps/scenarios/Sandbox%20-%20Romans.xml</option>
            <option>localhost:8080/public/maps/scenarios/Sandbox%20-%20Seleucids.xml</option>
            <option>localhost:8080/public/maps/scenarios/Sandbox%20-%20Spartans.xml</option>
            <option>localhost:8080/public/maps/scenarios/Savanna%20Ravine.xml</option>
            <option>localhost:8080/public/maps/scenarios/Serengeti.xml</option>
            <option>localhost:8080/public/maps/scenarios/Ship%20Formations.xml</option>
            <option>localhost:8080/public/maps/scenarios/shipattacks.xml</option>
            <option>localhost:8080/public/maps/scenarios/Siwa%20Oasis.xml</option>
            <option>localhost:8080/public/maps/scenarios/starting_economy_walkthro">starting_economy_walkthrougoption>xml</a>
            <option>localhost:8080/public/maps/scenarios/temperate%20map.xml</option>
            <option>localhost:8080/public/maps/scenarios/Territory%20Demo.xml</option>
            <option>localhost:8080/public/maps/scenarios/The%20Massacre%20of%20Delphi.xmllphi.xml<option>>
            <option>localhost:8080/public/maps/scenarios/The%20Persian%20Gates.xml</option>
            <option>localhost:8080/public/maps/scenarios/Third%20Macedonian%20War.xml</option>
            <option>localhost:8080/public/maps/scenarios/Tropical%20Island.xml</option>
            <option>localhost:8080/public/maps/scenarios/Units_demo.xml</option>
            <option>localhost:8080/public/maps/scenarios/Walls.xml</option>
            <option>localhost:8080/public/maps/scenarios/WallTest.xml</option>
            <option>localhost:8080/public/maps/scenarios/We%20are%20Legion.xml</option>
            
          </select>
          <button id="btnMAPLoad">Load</button>
          <br />
          <label for="cvsMap" style="vertical-align: top">Map</label>
          <canvas id="cvsMap" width="512" height="512"></canvas>
        </div>
        <div class="trenner"></div>

      <!-- TECH-->
        <div class="TECH panel">
          <div id="jsonTECH">
          </div>
        </div>

      <!-- ASM -->
        <div class="ASM panel">
          <div>
            asm.js links: <a href="https://blog.mozilla.org/luke/2014/01/14/asm-js-aot-compilation-and-startup-performance/">cache</a>
          </div>   
          <br />
          <label for="slcRepeats">Repeat</label>
          <select id="slcRepeats">
            <option>1</option>
            <option>2</option>
            <option selected>4</option>
            <option>8</option>
          </select>
          <label for="slcLoops">Loops</label>
          <select id="slcLoops">
            <option>1.000</option>
            <option selected>10.000</option>
            <option>100.000</option>
            <option>1.000.000</option>
          </select>
          <button id="btnASMGo1" onclick="H.ASMTEST()">emp()</button>        
          <button id="btnASMGo2" onclick="H.ASMTEST1()">sin()</button>        
          <button onclick="H.Display.clear()">Clear</button>     
        </div>

      </div>

    </div>

    <!-- Trenner -->
    <div class="trenner"></div>

  <!-- Error -->
    <div class="error bar">
      <span id="cError"></span>
    </div>

    <!-- Trenner -->
    <div class="trenner"></div>

  <!-- Browser -->
    <div class="browser bar">
      <button id="cBack" class="">Back</button>
      <button id="cNext" class="">Next</button>
      <select id="cHist" class=""></select>
      <span   id="cCurr" class="">replace me</span>
    </div>

    <!-- Trenner -->
    <div class="trenner"></div>

  <!-- Info -->
    <div class="info bar">
      <span id="cInfo"></span>
    </div>

    <!-- Trenner -->
    <div class="trenner"></div>

  <!-- Result -->
    <div class="results bar">
      <div id="results" class="mgn2">
        <button style="float: right;" onclick="H.Browser.results.clear()">Clear</button>            
        <table id="tblResult"></table>
        <div   id="divResult"></div>
        <div class="trenner"></div>
      </div>
    </div>

    <!-- Trenner -->
    <div class="trenner bar" style="height: 8px; background: #888; display: block"></div>

  <!-- Scripts -->
    <div>
      <script>

        var errors = 0, bInitializes = true;

        window.onerrorXX = function(e, f, l){
          var error = "";
          if (bInitializes){
            error += "Browser not supported. Try this one ";
            error += "<a href='http://www.mozilla.org/en-US/firefox/channel/#aurora'>Firefox</a>, ";
            error += "<a href='https://developer.mozilla.org/en-US/Firefox/Releases/30'>why</a> ";
            error += "and come back soon, thx.<br />";
            error += "<span style='font-weight: 400;'>[" + e + "]<span>";
            document.getElementById("cError").innerHTML = error;
          } else {
            error += "Error occured.<br />";
            error += "<span style='font-weight: 400;'>[" + e + "]<span><br />";
            error += "<span style='font-weight: 400;'>[" + f + ":" + l + "]<span><br />";
            // document.getElementById("cError").innerHTML += error;
            H.Browser.error(error);
          }
          console.log(e, f, l);
          errors += 1;
        }

        var $  = document.getElementById.bind(document),
            $$ = function(selector){return H.toArray(document.querySelectorAll(selector));},
            // fake bot environment 
            HANNIBAL = {},
            H = HANNIBAL,
            deb = function(){
              var args = arguments;
              if (args.length === 0) {args = ["**"];}
              if (args.length === 1) {args = ["%s", args[0]];}
              console.log(H.format.apply(H, args));
            };

        H.Bot = {ticks: false};

      </script>

    <!-- simulates alphabetic loading sequence -->
      <script type="text/javascript" src="../_helper.js"></script>
      <!-- // <script type="text/javascript" src="../asm.js"></script> -->
      <script type="text/javascript" src="../config.js"></script>
      <script type="text/javascript" src="../data.js"></script>
      <script type="text/javascript" src="../economy.js"></script>
      <script type="text/javascript" src="../store.js"></script>
      <script type="text/javascript" src="../htn-helper.js"></script>
      <script type="text/javascript" src="../htn-eco-methods.js"></script>
      <script type="text/javascript" src="../htn-eco-operators.js"></script>
      <script type="text/javascript" src="../htn-planner.js"></script>
      <script type="text/javascript" src="../tools.js"></script>
      <script type="text/javascript" src="data/store-json.export"></script>
      <script type="text/javascript" src="data/techs-json.export"></script>
      <script type="text/javascript" src="htn-eco-examples.js"></script>
      <script type="text/javascript" src="htn-blocks.js"></script>
      <script type="text/javascript" src="display.js"></script>
      <script type="text/javascript" src="browser.js"></script>
      
    <!--- Init -->
      <script>

        bInitializes = false;

          H.HCQ = H.Store.Query;
          H.QRY = function(hcq, debug){return new H.HCQ(H.store, hcq, debug);};

        window.onload = function(){
          var error = "", res ;

          TIM.step("Hash", location.hash);

          H.Browser.init("#!0;athen;HCQ");

          if (!location.hash.contains("#!")){
            H.Browser.do();
          } else {
            H.Browser.execute(location.hash);
          }  

          if (!errors){H.Browser.error("");}
          TIM.step("ONLOAD");
        };
        
      </script>

    </div>
 
  </body>
</html>
